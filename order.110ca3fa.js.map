{"version":3,"sources":["js/order.js"],"names":["moreBtnEl","document","querySelector","deliveryDetailsEl","editInfoBtn","client","finishEditingBtn","deliveryBlock","paymentBlock","citiesSelectEl","postTypesEl","querySelectorAll","postAddressBlock","postButtonEl","showOrderDetails","classList","toggle","editInfo","add","addEventListener","finishEditing","removeEventListener","firstNameEl","lastNameEl","patronymicEl","emailEl","phoneEl","firstName","value","lastName","patronymic","email","phone","innerHTML","remove","findAddress","e","console","log","currentPostType","addresses","code","department","changePostAddresses","$","ajax","type","data","city","postType","url","dataType","success","response","error","appendOrderFormErrorMessages","responseJSON","errors","arr","reduce","acc","el","activatePaymentBlock","key","errorMessagesEl","li","createElement","append","forEach"],"mappings":";;;;;;;;;;;;;AA8GC,aA9GD,QAAA,iCACA,QAAA,4BAEA,QAAA,mCACA,QAAA,oCACA,QAAA,sBACA,QAAA,mCAEA,MAAMA,EAAYC,SAASC,cAAc,YACnCC,EAAoBF,SAASC,cAAc,sBAC3CE,EAAcH,SAASC,cAAc,mBACrCG,EAASJ,SAASC,cAAc,WAChCI,EAAmBL,SAASC,cAAc,sBAC1CK,EAAgBN,SAASC,cAAc,aACvCM,EAAeP,SAASC,cAAc,YACtCO,EAAiBR,SAASC,cAAc,cACxCQ,EAAcT,SAASU,iBAAiB,6BACxCC,EAAmBX,SAASC,cAAc,mBAC1CW,EAAeZ,SAASC,cAAc,mBAQ5C,SAASY,IACPX,EAAkBY,UAAUC,OAAO,aAGrC,SAASC,IACPZ,EAAOU,UAAUG,IAAI,eACrBZ,EAAiBa,iBAAiB,QAASC,GAC3Cb,EAAcQ,UAAUG,IAAI,cAC5BV,EAAaO,UAAUG,IAAI,cAG7B,SAASE,IACPd,EAAiBe,oBAAoB,QAASD,GACxCE,MAAAA,EAAcrB,SAASC,cAAc,sBACrCqB,EAAatB,SAASC,cAAc,qBACpCsB,EAAevB,SAASC,cAAc,uBACtCuB,EAAUxB,SAASC,cAAc,iBACjCwB,EAAUzB,SAASC,cAAc,kBAEjCyB,EAAY1B,SAASC,cAAc,mCAAmC0B,MACtEC,EAAW5B,SAASC,cAAc,kCAAkC0B,MACpEE,EAAa7B,SAASC,cAAc,oCAAoC0B,MACxEG,EAAQ9B,SAASC,cAAc,8BAA8B0B,MAC7DI,EAAQ/B,SAASC,cAAc,+BAA+B0B,MAEpEN,EAAYW,UAAYN,EACxBJ,EAAWU,UAAYJ,EACvBL,EAAaS,UAAYH,EACzBL,EAAQQ,UAAYF,EACpBL,EAAQO,UAAYD,EAEpB3B,EAAOU,UAAUmB,OAAO,eACxB3B,EAAcQ,UAAUmB,OAAO,cAGjC,SAASC,EAAYC,GACnBC,QAAQC,IAAI7B,EAAemB,OACrBW,MAAAA,EAAkBtC,SAASC,cAAc,qCAAqC0B,MACpFS,QAAQC,IAAIC,GAGNC,MAAAA,EAAY,CAChB,CAAEC,KAAM,QAASC,WAAY,gBAC7B,CAAED,KAAM,QAASC,WAAY,gBAC7B,CAAED,KAAM,QAASC,WAAY,iBAE/BC,EAAoBH,GAEpBI,EAAEC,KAAK,CACLC,KAAM,OACNC,KAAM,CAAEC,KAAMvC,EAAemB,MAAOqB,SAAUV,GAC9CW,IAAK,GACLC,SAAU,OACVC,QAAS,SAAUC,GACjBV,EAAoBH,IAEtBc,MAAO,SAAUD,GAEfE,EADeF,EAASG,aAAaC,QAErCpB,QAAQC,IAAI,YAKlB,SAASK,EAAoBe,GAC3B9C,EAAiBqB,UAAY,IAAIyB,GAAKC,OAAO,CAACC,EAAKC,IAC1CD,oBAAwBC,EAAGpB,SAASoB,EAAGnB,sBAC7C,IAGL,SAASoB,IACPtD,EAAaO,UAAUmB,OAAO,cAGhC,SAASqB,EAA6BE,GAC/BM,IAAAA,OAAON,EAAQ,CACZO,MAAAA,EAAkB/D,SAASC,+BAA+B6D,iBAE3D,IAAA,MAAMT,KAASG,EAAOM,KAAM,CAC3BE,IAAAA,EAAKhE,SAASiE,cAAc,MAChCD,EAAGE,OAAOb,GACVU,EAAgBG,OAAOF,KAvF7BjE,EAAUmB,iBAAiB,QAASL,GACpCV,EAAYe,iBAAiB,QAASF,GACtCR,EAAeU,iBAAiB,SAAUgB,GAC1CzB,EAAY0D,QAAQP,GAAMA,EAAG1C,iBAAiB,SAAUgB,IACxDtB,EAAaM,iBAAiB,QAAS2C","file":"order.110ca3fa.js","sourceRoot":"../src","sourcesContent":["import '../sass/utils/_variables.scss';\nimport '../sass/base/_reset.scss';\n\nimport '../sass/components/_header.scss';\nimport '../sass/components/_product.scss';\nimport '../sass/order.scss';\nimport '../sass/components/_footer.scss';\n\nconst moreBtnEl = document.querySelector('.js-more');\nconst deliveryDetailsEl = document.querySelector('.js-stage__details');\nconst editInfoBtn = document.querySelector('.js-client-edit');\nconst client = document.querySelector('.client');\nconst finishEditingBtn = document.querySelector('.js-finish-editing');\nconst deliveryBlock = document.querySelector('.delivery');\nconst paymentBlock = document.querySelector('.payment');\nconst citiesSelectEl = document.querySelector('.js-cities');\nconst postTypesEl = document.querySelectorAll('.post__input[name=\"post\"]');\nconst postAddressBlock = document.querySelector('.js-departments');\nconst postButtonEl = document.querySelector('.js-post-button');\n\nmoreBtnEl.addEventListener('click', showOrderDetails);\neditInfoBtn.addEventListener('click', editInfo);\ncitiesSelectEl.addEventListener('change', findAddress);\npostTypesEl.forEach(el => el.addEventListener('change', findAddress));\npostButtonEl.addEventListener('click', activatePaymentBlock);\n\nfunction showOrderDetails() {\n  deliveryDetailsEl.classList.toggle('is-hidden');\n}\n\nfunction editInfo() {\n  client.classList.add('is-editable');\n  finishEditingBtn.addEventListener('click', finishEditing);\n  deliveryBlock.classList.add('is-blocked');\n  paymentBlock.classList.add('is-blocked');\n}\n\nfunction finishEditing() {\n  finishEditingBtn.removeEventListener('click', finishEditing);\n  const firstNameEl = document.querySelector('.client__firstname');\n  const lastNameEl = document.querySelector('.client__lastname');\n  const patronymicEl = document.querySelector('.client__patronymic');\n  const emailEl = document.querySelector('.client__mail');\n  const phoneEl = document.querySelector('.client__phone');\n\n  const firstName = document.querySelector('input[name=\"client__firstname\"]').value;\n  const lastName = document.querySelector('input[name=\"client__lastname\"]').value;\n  const patronymic = document.querySelector('input[name=\"client__patronymic\"]').value;\n  const email = document.querySelector('input[name=\"client__mail\"]').value;\n  const phone = document.querySelector('input[name=\"client__phone\"]').value;\n\n  firstNameEl.innerHTML = firstName;\n  lastNameEl.innerHTML = lastName;\n  patronymicEl.innerHTML = patronymic;\n  emailEl.innerHTML = email;\n  phoneEl.innerHTML = phone;\n\n  client.classList.remove('is-editable');\n  deliveryBlock.classList.remove('is-blocked');\n}\n\nfunction findAddress(e) {\n  console.log(citiesSelectEl.value);\n  const currentPostType = document.querySelector('.post__input[name=\"post\"]:checked').value;\n  console.log(currentPostType);\n\n  // such type of data are waited from server. Delete this Array\n  const addresses = [\n    { code: 'code1', department: 'Department 1' },\n    { code: 'code2', department: 'Department 2' },\n    { code: 'code3', department: 'Department 3' },\n  ];\n  changePostAddresses(addresses); // delete this line\n\n  $.ajax({\n    type: 'POST',\n    data: { city: citiesSelectEl.value, postType: currentPostType },\n    url: '',\n    dataType: 'json',\n    success: function (response) {\n      changePostAddresses(addresses);\n    },\n    error: function (response) {\n      const errors = response.responseJSON.errors;\n      appendOrderFormErrorMessages(errors);\n      console.log('error');\n    },\n  });\n}\n\nfunction changePostAddresses(arr) {\n  postAddressBlock.innerHTML = [...arr].reduce((acc, el) => {\n    return acc + `<option value=\"${el.code}\">${el.department}</option>`;\n  }, '');\n}\n\nfunction activatePaymentBlock() {\n  paymentBlock.classList.remove('is-blocked');\n}\n\nfunction appendOrderFormErrorMessages(errors) {\n  for (key in errors) {\n    const errorMessagesEl = document.querySelector(`label[for=\"id_${key}\"] .errors`);\n\n    for (const error of errors[key]) {\n      let li = document.createElement('li');\n      li.append(error);\n      errorMessagesEl.append(li);\n    }\n  }\n}\n"]}