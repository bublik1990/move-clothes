{"version":3,"sources":["js/notification.js","js/addToFavorites.js","js/new.js"],"names":["refs","backdropRef","document","querySelector","notificationCloseBtn","notificationText","isNotificationMessageOpen","openNotificationWithSuccess","string","classList","add","remove","openNotificationMessage","closeNotificationMessage","openNotificationWithError","textContent","addEventListener","closeNotificationMessageByCloseBtn","setTimeout","removeEventListener","addToFavorites","product","toggle","$","ajax","type","data","dataset","id","url","success","response","error","console","log","favorites","querySelectorAll","showMoreBtn","catalogListEl","handleClick","e","target","nodeName","apply","showMoreProduction","preventDefault","arr","newProductsmarkUp","generateMarkup","image","imageDescription","name","price","insertAdjacentHTML","reduce","acc","el"],"mappings":";AA6CC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,0BAAA,EAAA,QAAA,4BAAA,EA7CD,MAAMA,EAAO,CACXC,YAAaC,SAASC,cAAc,aACpCC,qBAAsBF,SAASC,cAAc,0BAC7CE,iBAAkBH,SAASC,cAAc,2BAG3C,IAAIG,GAA4B,EAEhC,SAASC,EAA4BC,GACnCR,EAAKC,YAAYQ,UAAUC,IAAI,wBAC/BV,EAAKC,YAAYQ,UAAUE,OAAO,sBAClCC,EAAwBJ,GACxBK,IAGF,SAASC,EAA0BN,GACjCR,EAAKC,YAAYQ,UAAUC,IAAI,sBAC/BV,EAAKC,YAAYQ,UAAUE,OAAO,wBAClCC,EAAwBJ,GACxBK,IAGF,SAASD,EAAwBJ,GAC/BR,EAAKK,iBAAiBU,YAAcP,EACpCR,EAAKC,YAAYQ,UAAUE,OAAO,aAClCX,EAAKI,qBAAqBY,iBAAiB,QAASC,GACpDX,GAA4B,EAG9B,SAASO,IACHP,GACFY,WAAW,KACTlB,EAAKC,YAAYQ,UAAUC,IAAI,aAC/BJ,GAA4B,EAC5BN,EAAKI,qBAAqBe,oBAAoB,QAASF,IACtD,KAIP,SAASA,IACHX,IACFN,EAAKC,YAAYQ,UAAUC,IAAI,aAC/BV,EAAKI,qBAAqBe,oBAAoB,QAASF,GACvDjB,EAAKM,2BAA4B;;AC1BpC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,EAjBD,IAAA,EAAA,QAAA,kBAEO,SAASc,IACRC,MAAAA,EAAU,KAChBA,EAAQZ,UAAUa,OAAO,eACzBC,EAAEC,KAAK,CACLC,KAAM,OACNC,KAAM,KAAKC,QAAQC,GACnBC,IAAK,GACLC,QAAS,SAAUC,GACjBV,EAAQZ,UAAUa,OAAO,gBAE3BU,MAAO,SAAUD,GACfE,QAAQC,IAAI,UACc,EAAA,EAAA,2BAAA;;ACoD/B,aAlED,IAAA,EAAA,QAAA,oBAEA,MAAMC,EAAYjC,SAASkC,iBAAiB,uBACtCC,EAAcnC,SAASC,cAAc,iBACrCmC,EAAgBpC,SAASC,cAAc,kBAI7C,SAASoC,EAAYC,GACbC,MAAAA,EAASD,EAAEC,OACO,WAApBA,EAAOC,UACIC,EAAAA,eAAAA,MAAMF,GAGvB,SAASG,EAAmBJ,GAC1BA,EAAEK,iBAIIC,MAiBAC,EAAoBC,EAjBd,CACV,CACEC,MAAO,8BACPC,iBAAkB,cAClBC,KAAM,SACNC,MAAO,OACPxB,GAAI,IAEN,CACEqB,MAAO,8BACPC,iBAAkB,cAClBC,KAAM,SACNC,MAAO,MACPxB,GAAI,MAKRU,EAAce,mBAAmB,YAAaN,GAE9CxB,EAAEC,KAAK,CACLC,KAAM,MACNI,IAAK,GACLH,KAAM,GACNI,QAAS,SAAUJ,OAQvB,SAASsB,EAAeF,GACf,MAAA,IAAIA,GAAKQ,OAAO,CAACC,EAAKC,IAEzBD,kJAGqDC,EAAGP,eAAeO,EAAGN,wEAC7BM,EAAGL,+DACFK,EAAGJ,sHAEyBI,EAAG5B,2FAI9E,IA5DLS,EAAYrB,iBAAiB,QAAS4B,GACtCN,EAActB,iBAAiB,QAASuB","file":"new.bad73c7b.js","sourceRoot":"../src","sourcesContent":["const refs = {\n  backdropRef: document.querySelector('.backdrop'),\n  notificationCloseBtn: document.querySelector('.js-notification-close'),\n  notificationText: document.querySelector('.js-notification__text'),\n};\n\nlet isNotificationMessageOpen = false;\n\nfunction openNotificationWithSuccess(string) {\n  refs.backdropRef.classList.add('notification-success');\n  refs.backdropRef.classList.remove('notification-error');\n  openNotificationMessage(string);\n  closeNotificationMessage();\n}\n\nfunction openNotificationWithError(string) {\n  refs.backdropRef.classList.add('notification-error');\n  refs.backdropRef.classList.remove('notification-success');\n  openNotificationMessage(string);\n  closeNotificationMessage();\n}\n\nfunction openNotificationMessage(string) {\n  refs.notificationText.textContent = string;\n  refs.backdropRef.classList.remove('is-hidden');\n  refs.notificationCloseBtn.addEventListener('click', closeNotificationMessageByCloseBtn);\n  isNotificationMessageOpen = true;\n}\n\nfunction closeNotificationMessage() {\n  if (isNotificationMessageOpen) {\n    setTimeout(() => {\n      refs.backdropRef.classList.add('is-hidden');\n      isNotificationMessageOpen = false;\n      refs.notificationCloseBtn.removeEventListener('click', closeNotificationMessageByCloseBtn);\n    }, 3000);\n  }\n}\n\nfunction closeNotificationMessageByCloseBtn() {\n  if (isNotificationMessageOpen) {\n    refs.backdropRef.classList.add('is-hidden');\n    refs.notificationCloseBtn.removeEventListener('click', closeNotificationMessageByCloseBtn);\n    refs.isNotificationMessageOpen = false;\n  }\n}\n\nexport { openNotificationWithSuccess, openNotificationWithError };\n","import { openNotificationWithSuccess, openNotificationWithError } from './notification';\n\nexport function addToFavorites() {\n  const product = this;\n  product.classList.toggle('is-favorite'); // delete this line\n  $.ajax({\n    type: 'POST',\n    data: this.dataset.id,\n    url: '',\n    success: function (response) {\n      product.classList.toggle('is-favorite');\n    },\n    error: function (response) {\n      console.log('error');\n      openNotificationWithError('Какой-то текстggh');\n    },\n  });\n}\n","import { addToFavorites } from './addToFavorites';\n\nconst favorites = document.querySelectorAll('.catalog__favorites');\nconst showMoreBtn = document.querySelector('.is-show-more');\nconst catalogListEl = document.querySelector('.catalog__list');\nshowMoreBtn.addEventListener('click', showMoreProduction);\ncatalogListEl.addEventListener('click', handleClick);\n\nfunction handleClick(e) {\n  const target = e.target;\n  if (target.nodeName !== 'BUTTON') return;\n  addToFavorites.apply(target);\n}\n\nfunction showMoreProduction(e) {\n  e.preventDefault();\n\n  // delete this array. It is an example to show how it works without backend.\n  // pictures do not loads because of Parcel. In Django will be ok\n  const arr = [\n    {\n      image: '../images/catalog/item4.png',\n      imageDescription: 'Фото товара',\n      name: 'Платье',\n      price: '1160',\n      id: 45,\n    },\n    {\n      image: '../images/catalog/item7.png',\n      imageDescription: 'Фото товара',\n      name: 'Костюм',\n      price: '900',\n      id: 65,\n    },\n  ];\n\n  const newProductsmarkUp = generateMarkup(arr); //delete this line\n  catalogListEl.insertAdjacentHTML('beforeend', newProductsmarkUp); //delete this line\n\n  $.ajax({\n    type: 'GET',\n    url: '',\n    data: {}, //page\n    success: function (data) {\n      // uncomment\n      // const newProductsmarkUp = generateMarkup(data);\n      // catalogListEl.insertAdjacentHTML('beforeend', newProductsmarkUp);\n    },\n  });\n}\n\nfunction generateMarkup(arr) {\n  return [...arr].reduce((acc, el) => {\n    return (\n      acc +\n      `<li class=\"catalog__item\">\n                    <a class=\"catalog__link\" href=\"#\">\n                        <img class=\"catalog__image\" src=\"${el.image}\" alt=\"${el.imageDescription}\">\n                        <p class=\"catalog__name\">${el.name}</p>\n                        <p class=\"catalog__price\">${el.price}</p>\n                    </a>\n                    <button class=\"catalog__favorites\" type=\"button\" data-id=\"${el.id}\" aria-label=\"Add in favorites\">\n                    </button>\n                </li>`\n    );\n  }, '');\n}\n"]}