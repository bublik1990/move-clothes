{"version":3,"sources":["js/notification.js","js/addToFavorites.js","js/cart.js"],"names":["refs","backdropRef","document","querySelector","notificationCloseBtn","notificationText","isNotificationMessageOpen","openNotificationWithSuccess","string","classList","add","remove","openNotificationMessage","closeNotificationMessage","openNotificationWithError","textContent","addEventListener","closeNotificationMessageByCloseBtn","setTimeout","removeEventListener","addToFavorites","product","toggle","$","ajax","type","data","dataset","id","url","success","response","error","console","log","setTotalSum","totalEl","total","querySelectorAll","reduce","acc","el","Number","innerHTML","favorites","forEach","bind","goods","deletePositionFromCart","itemEl","closest","productId","checkEmptyCart","length"],"mappings":";;;;;;;;;;;;;;;;;AA6CC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,0BAAA,EAAA,QAAA,4BAAA,EA7CD,MAAMA,EAAO,CACXC,YAAaC,SAASC,cAAc,aACpCC,qBAAsBF,SAASC,cAAc,0BAC7CE,iBAAkBH,SAASC,cAAc,2BAG3C,IAAIG,GAA4B,EAEhC,SAASC,EAA4BC,GACnCR,EAAKC,YAAYQ,UAAUC,IAAI,wBAC/BV,EAAKC,YAAYQ,UAAUE,OAAO,sBAClCC,EAAwBJ,GACxBK,IAGF,SAASC,EAA0BN,GACjCR,EAAKC,YAAYQ,UAAUC,IAAI,sBAC/BV,EAAKC,YAAYQ,UAAUE,OAAO,wBAClCC,EAAwBJ,GACxBK,IAGF,SAASD,EAAwBJ,GAC/BR,EAAKK,iBAAiBU,YAAcP,EACpCR,EAAKC,YAAYQ,UAAUE,OAAO,aAClCX,EAAKI,qBAAqBY,iBAAiB,QAASC,GACpDX,GAA4B,EAG9B,SAASO,IACHP,GACFY,WAAW,KACTlB,EAAKC,YAAYQ,UAAUC,IAAI,aAC/BJ,GAA4B,EAC5BN,EAAKI,qBAAqBe,oBAAoB,QAASF,IACtD,KAIP,SAASA,IACHX,IACFN,EAAKC,YAAYQ,UAAUC,IAAI,aAC/BV,EAAKI,qBAAqBe,oBAAoB,QAASF,GACvDjB,EAAKM,2BAA4B;;AC1BpC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,EAjBD,IAAA,EAAA,QAAA,kBAEO,SAASc,IACRC,MAAAA,EAAU,KAChBA,EAAQZ,UAAUa,OAAO,eACzBC,EAAEC,KAAK,CACLC,KAAM,OACNC,KAAM,KAAKC,QAAQC,GACnBC,IAAK,GACLC,QAAS,SAAUC,GACjBV,EAAQZ,UAAUa,OAAO,gBAE3BU,MAAO,SAAUD,GACfE,QAAQC,IAAI,UACc,EAAA,EAAA,2BAAA;;AC6C/B,aA3DD,QAAA,4BACA,QAAA,iCACA,QAAA,mCACA,QAAA,mCACA,QAAA,sCACA,QAAA,qBACA,QAAA,oCACA,QAAA,mCACA,IAAA,EAAA,QAAA,oBAEA,SAASC,IACDC,MAAAA,EAAUlC,SAASC,cAAc,aAGjCkC,EAAQ,IAFEnC,SAASoC,iBAAiB,oBAEfC,OAAO,CAACC,EAAKC,IAAOD,EAAME,OAAOD,EAAG1B,aAAc,GAC7EqB,EAAQO,UAAYN,EAGtBF,IAEA,MAAMS,EAAY1C,SAASoC,iBAAiB,uBAC5CM,EAAUC,QAAQJ,IAChBA,EAAGzB,iBAAiB,QAASI,EAAe0B,eAAAA,KAAKL,MAGnD,MAAMM,EAAQ7C,SAASoC,iBAAiB,oBAKxC,SAASU,IACDC,MAAAA,EAAS,KAAKC,QAAQ,kBACtBC,EAAYF,EAAOtB,QAAQC,GACjCqB,EAAOtC,SACPyC,IACAjB,IAEAZ,EAAEC,KAAK,CACLC,KAAM,OACNC,KAAMyB,EACNtB,IAAK,GACLC,QAAS,SAAUC,GACjBkB,EAAOtC,SACPyC,IACAjB,KAEFH,MAAO,SAAUD,GACfE,QAAQC,IAAI,YAKlB,SAASkB,IACQlD,SAASoC,iBAAiB,kBAC7Be,SACVnD,SAASC,cAAc,gBAAgBM,UAAUE,OAAO,aACxDT,SAASC,cAAc,eAAeM,UAAUC,IAAI,aACpDR,SAASC,cAAc,iBAAiBM,UAAUE,OAAO,cA/B7DoC,EAAMF,QAAQJ,IACZA,EAAGzB,iBAAiB,QAASgC,EAAuBF,KAAKL","file":"cart.03587c9a.js","sourceRoot":"../src","sourcesContent":["const refs = {\n  backdropRef: document.querySelector('.backdrop'),\n  notificationCloseBtn: document.querySelector('.js-notification-close'),\n  notificationText: document.querySelector('.js-notification__text'),\n};\n\nlet isNotificationMessageOpen = false;\n\nfunction openNotificationWithSuccess(string) {\n  refs.backdropRef.classList.add('notification-success');\n  refs.backdropRef.classList.remove('notification-error');\n  openNotificationMessage(string);\n  closeNotificationMessage();\n}\n\nfunction openNotificationWithError(string) {\n  refs.backdropRef.classList.add('notification-error');\n  refs.backdropRef.classList.remove('notification-success');\n  openNotificationMessage(string);\n  closeNotificationMessage();\n}\n\nfunction openNotificationMessage(string) {\n  refs.notificationText.textContent = string;\n  refs.backdropRef.classList.remove('is-hidden');\n  refs.notificationCloseBtn.addEventListener('click', closeNotificationMessageByCloseBtn);\n  isNotificationMessageOpen = true;\n}\n\nfunction closeNotificationMessage() {\n  if (isNotificationMessageOpen) {\n    setTimeout(() => {\n      refs.backdropRef.classList.add('is-hidden');\n      isNotificationMessageOpen = false;\n      refs.notificationCloseBtn.removeEventListener('click', closeNotificationMessageByCloseBtn);\n    }, 3000);\n  }\n}\n\nfunction closeNotificationMessageByCloseBtn() {\n  if (isNotificationMessageOpen) {\n    refs.backdropRef.classList.add('is-hidden');\n    refs.notificationCloseBtn.removeEventListener('click', closeNotificationMessageByCloseBtn);\n    refs.isNotificationMessageOpen = false;\n  }\n}\n\nexport { openNotificationWithSuccess, openNotificationWithError };\n","import { openNotificationWithSuccess, openNotificationWithError } from './notification';\n\nexport function addToFavorites() {\n  const product = this;\n  product.classList.toggle('is-favorite'); // delete this line\n  $.ajax({\n    type: 'POST',\n    data: this.dataset.id,\n    url: '',\n    success: function (response) {\n      product.classList.toggle('is-favorite');\n    },\n    error: function (response) {\n      console.log('error');\n      openNotificationWithError('Какой-то текстggh');\n    },\n  });\n}\n","import '../sass/base/_reset.scss';\nimport '../sass/utils/_variables.scss';\nimport '../sass/components/_header.scss';\nimport '../sass/components/_recent.scss';\nimport '../sass/components/_subscribe.scss';\nimport '../sass/cart.scss';\nimport '../sass/components/_product.scss';\nimport '../sass/components/_footer.scss';\nimport { addToFavorites } from './addToFavorites';\n\nfunction setTotalSum() {\n  const totalEl = document.querySelector('.js-total');\n  const goodsEl = document.querySelectorAll('.product__price');\n\n  const total = [...goodsEl].reduce((acc, el) => acc + Number(el.textContent), 0);\n  totalEl.innerHTML = total;\n}\n\nsetTotalSum();\n\nconst favorites = document.querySelectorAll('.product__favorites');\nfavorites.forEach(el => {\n  el.addEventListener('click', addToFavorites.bind(el));\n});\n\nconst goods = document.querySelectorAll('.product__delete');\ngoods.forEach(el => {\n  el.addEventListener('click', deletePositionFromCart.bind(el));\n});\n\nfunction deletePositionFromCart() {\n  const itemEl = this.closest('.product__item');\n  const productId = itemEl.dataset.id;\n  itemEl.remove(); // delete this line\n  checkEmptyCart(); // delete this line\n  setTotalSum(); // delete this line\n\n  $.ajax({\n    type: 'POST',\n    data: productId,\n    url: '',\n    success: function (response) {\n      itemEl.remove();\n      checkEmptyCart();\n      setTotalSum();\n    },\n    error: function (response) {\n      console.log('error');\n    },\n  });\n}\n\nfunction checkEmptyCart() {\n  const itemEl = document.querySelectorAll('.product__item');\n  if (!itemEl.length) {\n    document.querySelector('.cart__empty').classList.remove('is-hidden');\n    document.querySelector('.cart__form').classList.add('is-hidden');\n    document.querySelector('.cart__recent').classList.remove('is-hidden');\n  }\n}\n"]}