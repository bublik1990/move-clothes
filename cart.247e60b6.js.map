{"version":3,"sources":["js/notification.js","js/addToFavorites.js","js/cart.js"],"names":["refs","successBtn","document","querySelector","errorBtn","backdropRef","notificationCloseBtn","addEventListener","openNotificationWithSuccess","openNotificationWithError","isNotificationMessageOpen","classList","add","remove","openNotificationMessage","closeNotificationMessage","closeNotificationMessageByCloseBtn","setTimeout","removeEventListener","addToFavorites","product","toggle","$","ajax","type","data","dataset","id","url","success","response","error","console","log","setTotalSum","totalEl","total","querySelectorAll","reduce","acc","el","Number","textContent","innerHTML","favorites","forEach","bind","goods","deletePositionFromCart","itemEl","closest","productId","checkEmptyCart","length"],"mappings":";;;;;;;;;;;;;;;;;AAgDC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,0BAAA,EAAA,QAAA,4BAAA,EAhDD,MAAMA,EAAO,CACXC,WAAYC,SAASC,cAAc,YACnCC,SAAUF,SAASC,cAAc,UACjCE,YAAaH,SAASC,cAAc,aACpCG,qBAAsBJ,SAASC,cAAc,2BAG/CH,EAAKC,WAAWM,iBAAiB,QAASC,GAC1CR,EAAKI,SAASG,iBAAiB,QAASE,GAExC,IAAIC,GAA4B,EAEhC,SAASF,IACPR,EAAKK,YAAYM,UAAUC,IAAI,wBAC/BZ,EAAKK,YAAYM,UAAUE,OAAO,sBAClCC,IACAC,IAGF,SAASN,IACPT,EAAKK,YAAYM,UAAUC,IAAI,sBAC/BZ,EAAKK,YAAYM,UAAUE,OAAO,wBAClCC,IACAC,IAGF,SAASD,IACPd,EAAKK,YAAYM,UAAUE,OAAO,aAClCb,EAAKM,qBAAqBC,iBAAiB,QAASS,GACpDN,GAA4B,EAG9B,SAASK,IACHL,GACFO,WAAW,KACTjB,EAAKK,YAAYM,UAAUC,IAAI,aAC/BF,GAA4B,EAC5BV,EAAKM,qBAAqBY,oBAAoB,QAASF,IACtD,KAIP,SAASA,IACHN,IACFV,EAAKK,YAAYM,UAAUC,IAAI,aAC/BZ,EAAKM,qBAAqBY,oBAAoB,QAASF,GACvDhB,EAAKU,2BAA4B;;AC7BpC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,EAjBD,IAAA,EAAA,QAAA,kBAEO,SAASS,IACRC,MAAAA,EAAU,KAChBA,EAAQT,UAAUU,OAAO,eACzBC,EAAEC,KAAK,CACLC,KAAM,OACNC,KAAM,KAAKC,QAAQC,GACnBC,IAAK,GACLC,QAAS,SAAUC,GACjBV,EAAQT,UAAUU,OAAO,gBAE3BU,MAAO,SAAUD,GACfE,QAAQC,IAAI,UACZ,EAAA,EAAA;;AC6CL,aA3DD,QAAA,4BACA,QAAA,iCACA,QAAA,mCACA,QAAA,mCACA,QAAA,sCACA,QAAA,qBACA,QAAA,oCACA,QAAA,mCACA,IAAA,EAAA,QAAA,oBAEA,SAASC,IACDC,MAAAA,EAAUjC,SAASC,cAAc,aAGjCiC,EAAQ,IAFElC,SAASmC,iBAAiB,oBAEfC,OAAO,CAACC,EAAKC,IAAOD,EAAME,OAAOD,EAAGE,aAAc,GAC7EP,EAAQQ,UAAYP,EAGtBF,IAEA,MAAMU,EAAY1C,SAASmC,iBAAiB,uBAC5CO,EAAUC,QAAQL,IAChBA,EAAGjC,iBAAiB,QAASY,EAAe2B,eAAAA,KAAKN,MAGnD,MAAMO,EAAQ7C,SAASmC,iBAAiB,oBAKxC,SAASW,IACDC,MAAAA,EAAS,KAAKC,QAAQ,kBACtBC,EAAYF,EAAOvB,QAAQC,GACjCsB,EAAOpC,SACPuC,IACAlB,IAEAZ,EAAEC,KAAK,CACLC,KAAM,OACNC,KAAM0B,EACNvB,IAAK,GACLC,QAAS,SAAUC,GACjBmB,EAAOpC,SACPuC,IACAlB,KAEFH,MAAO,SAAUD,GACfE,QAAQC,IAAI,YAKlB,SAASmB,IACQlD,SAASmC,iBAAiB,kBAC7BgB,SACVnD,SAASC,cAAc,gBAAgBQ,UAAUE,OAAO,aACxDX,SAASC,cAAc,eAAeQ,UAAUC,IAAI,aACpDV,SAASC,cAAc,iBAAiBQ,UAAUE,OAAO,cA/B7DkC,EAAMF,QAAQL,IACZA,EAAGjC,iBAAiB,QAASyC,EAAuBF,KAAKN","file":"cart.247e60b6.js","sourceRoot":"../src","sourcesContent":["const refs = {\n  successBtn: document.querySelector('.success'),\n  errorBtn: document.querySelector('.error'),\n  backdropRef: document.querySelector('.backdrop'),\n  notificationCloseBtn: document.querySelector('.js-notification-close'),\n};\n\nrefs.successBtn.addEventListener('click', openNotificationWithSuccess);\nrefs.errorBtn.addEventListener('click', openNotificationWithError);\n\nlet isNotificationMessageOpen = false;\n\nfunction openNotificationWithSuccess() {\n  refs.backdropRef.classList.add('notification-success');\n  refs.backdropRef.classList.remove('notification-error');\n  openNotificationMessage();\n  closeNotificationMessage();\n}\n\nfunction openNotificationWithError() {\n  refs.backdropRef.classList.add('notification-error');\n  refs.backdropRef.classList.remove('notification-success');\n  openNotificationMessage();\n  closeNotificationMessage();\n}\n\nfunction openNotificationMessage() {\n  refs.backdropRef.classList.remove('is-hidden');\n  refs.notificationCloseBtn.addEventListener('click', closeNotificationMessageByCloseBtn);\n  isNotificationMessageOpen = true;\n}\n\nfunction closeNotificationMessage() {\n  if (isNotificationMessageOpen) {\n    setTimeout(() => {\n      refs.backdropRef.classList.add('is-hidden');\n      isNotificationMessageOpen = false;\n      refs.notificationCloseBtn.removeEventListener('click', closeNotificationMessageByCloseBtn);\n    }, 3000);\n  }\n}\n\nfunction closeNotificationMessageByCloseBtn() {\n  if (isNotificationMessageOpen) {\n    refs.backdropRef.classList.add('is-hidden');\n    refs.notificationCloseBtn.removeEventListener('click', closeNotificationMessageByCloseBtn);\n    refs.isNotificationMessageOpen = false;\n  }\n}\n\nexport { openNotificationWithSuccess, openNotificationWithError };\n","import { openNotificationWithSuccess, openNotificationWithError } from './notification';\n\nexport function addToFavorites() {\n  const product = this;\n  product.classList.toggle('is-favorite'); // delete this line\n  $.ajax({\n    type: 'POST',\n    data: this.dataset.id,\n    url: '',\n    success: function (response) {\n      product.classList.toggle('is-favorite');\n    },\n    error: function (response) {\n      console.log('error');\n      openNotificationWithError();\n    },\n  });\n}\n","import '../sass/base/_reset.scss';\nimport '../sass/utils/_variables.scss';\nimport '../sass/components/_header.scss';\nimport '../sass/components/_recent.scss';\nimport '../sass/components/_subscribe.scss';\nimport '../sass/cart.scss';\nimport '../sass/components/_product.scss';\nimport '../sass/components/_footer.scss';\nimport { addToFavorites } from './addToFavorites';\n\nfunction setTotalSum() {\n  const totalEl = document.querySelector('.js-total');\n  const goodsEl = document.querySelectorAll('.product__price');\n\n  const total = [...goodsEl].reduce((acc, el) => acc + Number(el.textContent), 0);\n  totalEl.innerHTML = total;\n}\n\nsetTotalSum();\n\nconst favorites = document.querySelectorAll('.product__favorites');\nfavorites.forEach(el => {\n  el.addEventListener('click', addToFavorites.bind(el));\n});\n\nconst goods = document.querySelectorAll('.product__delete');\ngoods.forEach(el => {\n  el.addEventListener('click', deletePositionFromCart.bind(el));\n});\n\nfunction deletePositionFromCart() {\n  const itemEl = this.closest('.product__item');\n  const productId = itemEl.dataset.id;\n  itemEl.remove(); // delete this line\n  checkEmptyCart(); // delete this line\n  setTotalSum(); // delete this line\n\n  $.ajax({\n    type: 'POST',\n    data: productId,\n    url: '',\n    success: function (response) {\n      itemEl.remove();\n      checkEmptyCart();\n      setTotalSum();\n    },\n    error: function (response) {\n      console.log('error');\n    },\n  });\n}\n\nfunction checkEmptyCart() {\n  const itemEl = document.querySelectorAll('.product__item');\n  if (!itemEl.length) {\n    document.querySelector('.cart__empty').classList.remove('is-hidden');\n    document.querySelector('.cart__form').classList.add('is-hidden');\n    document.querySelector('.cart__recent').classList.remove('is-hidden');\n  }\n}\n"]}